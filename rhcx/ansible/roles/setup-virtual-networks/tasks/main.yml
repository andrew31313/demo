---
- name: Get the list of virtual networks
  command: "virsh net-list --all --name"
  register: netlist
  ignore_errors: True
  changed_when: False
  register: netlist
- name: Ensure RHCxNetwork network exists
  virt_net:
    name: "vagrant-private-dhcp"
    state: active
    xml: '{{ lookup("file", "RHCxNetwork.xml") }}'
  when: "'vagrant-private-dhcp' not in netlist.stdout"
