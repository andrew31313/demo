---
- name: Ensure the connection for the vagrant provisioning network exists
  nmcli:
    conn_name: "{{ host_vagrant_net_conn_name }}"
    type: "{{ vagrant_net_type }}"
    ifname: "{{ ansible_facts.default_ipv4.interface }}"
    autoconnect: "{{ vagrant_net_autoconnect }}"
    method4: "{{ vagrant_net_ipv4_method }}"
    method6: "{{ vagrant_net_ipv6_method }}"
    never_default4: "{{ vagrant_net_ipv4_never_default }}"
    zone: "{{ vagrant_net_zone }}"
    state: present
  become: yes
  notify: new_vagrant_connection
