---
- name: Ensure packages for the IPA server are installed
  yum:
    name: vsftpd
    state: present
  become: yes
# Server configuration goes here
- name: Ensure vsftpd systemd service is configured
  service:
    name: vsftpd
    state: "{{ service.ftp.state }}"
    enabled: "{{ service.ftp.enabled }}"
  become: yes
- name: Ensure FTP traffic is allowed through firewall
  firewalld:
    service: ftp
    state: "{{ service.ftp.fw_state }}"
    permanent: "{{ service.ftp.fw_permanent }}"
    immediate: "{{ service.ftp.fw_immediate }}"
    zone: "{{ service.ftp.fw_zone }}"
  become: yes
