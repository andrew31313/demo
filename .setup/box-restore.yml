---
# This playbook will restore from backups made with box-backup.yml. Assuming
# your external backup media is mounted on /mnt, you can use this:
#
# ansible-playbook -i localhost, -c local -e backup_dir=/mnt box-restore.yml
- name: box-restore
  hosts: localhost
  connection: local
  tasks:
    - fail:
        msg: "You need to specifiy the directory containing the backup with '-e backup_dir=<somedir>'"
      when: backup_dir is not defined
    - command:
        cmd: "tar -xpvf {{ backup_dir }}/box-backup.tar"
        chdir: "{{ ansible_user_dir }}"
        warn: false
